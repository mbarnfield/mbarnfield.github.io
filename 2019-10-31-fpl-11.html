<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Captaincy choice, FPL gameweek 11 2019</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>




<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}


.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Matthew Barnfield</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="publications.html">Publications</a>
</li>
<li>
  <a href="software.html">Software</a>
</li>
<li>
  <a href="teaching.html">Teaching</a>
</li>
<li>
  <a href="blog.html">Blog</a>
</li>
<li>
  <a href="fpl.html">FPL</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="http://github.com/mbarnfield">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://twitter.com/m_barnfield">
    <span class="fa fa-twitter fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://www.reddit.com/user/pm_me_tidy_code">
    <span class="fa fa-reddit fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Captaincy choice, FPL gameweek 11 2019</h1>
<h4 class="date">October 2019</h4>

</div>


<div id="picking-an-fpl-captain-gameweek-11" class="section level2 unnumbered">
<h2>Picking an FPL captain: Gameweek 11</h2>
<p>Another gameweek, another captaincy choice. Every week, I add the most recent gameweek data to my Bayesian multilevel model which predicts best captaincy choices based on the following logic, that I think most middling to good FPL players pretty much follow:</p>
<ul>
<li>Which of my players are best/consistent point scorers? (Class)</li>
<li>Which of my players are on form? (Form)</li>
<li>Which of my players have the best fixture, including whether they are home or away? (Fixture)</li>
<li>Which of my players’ teams are doing well? (Team)</li>
<li>Which of my players is likely to start? (Minutes)</li>
</ul>
<p>The workings of the model are explained more fully <a href="https://mbarnfield.github.io/2019-08-27-fpl-4.html">here</a> and <a href="https://mbarnfield.github.io/2019-10-17-fpl-9.html">here</a>.</p>
<p>I get my data from <a href="https://github.com/vaastav/Fantasy-Premier-League">vaastav’s GitHub repo</a> and fit a model with the following formula in <code>R</code>, using <code>brms</code>:</p>
<p><code>points | weights(weight) ~ player + opponent + home + minutes + (1 | mm(team_1, team_2))</code></p>
<p>So, it models points as a function of the player, their opponent, whether they are home or away, and the amount of minutes they play, with players nested within teams (of which there may be more than one over the course of the data). This model is then weighted so that more recent gameweeks count more for the calculation, with the most recent gameweek counting 1.5 times whereas the first gameweek I have (gameweek 25, last season) counts only once. Pretty much all of last season’s gameweeks are weighted around 1, and then there is a big jump at the start of the new season, and the weight increases fairly sharply each week until the most recent gameweek, to account for form.</p>
<p>To predict the best captains for the upcoming gameweek, I then fit the model to new data, containing each player, their upcoming opponent, etc, and get a fitted points prediction. However, <strong>my aim is not to predict points, but to model normally qualitative/heuristic captain selection methods quantitatively</strong>.</p>
</div>
<div id="expectation-vs-reality---gameweek-10" class="section level2 unnumbered">
<h2>Expectation vs reality - gameweek 10</h2>
<p>Despite this, following persistent requests for an expected/actual points comparison each week, I said last week I would start making a simple table of last week’s predicted top picks, how many points they ended up getting, and the actual highest point scorers. This enables us to see how often/infrequently the top picks according to the ‘captain-picking logic’ give meaningful returns and how often they are actually among the top point scorers. Remember, though, that more often than not the top scorers will feature players you would <em>never dream of picking as your captain</em> so this comparison is a bit weird. Also, I’m doing this for the version where players who have played &gt;45 minutes average over the last 5 games are assumed to play 90 this week (see below).</p>
<table>
<thead>
<tr class="header">
<th>Top 10 in model</th>
<th>Points</th>
<th>Top 10 in reality</th>
<th>Points</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Mané</td>
<td>5</td>
<td>Pulisic</td>
<td>20</td>
</tr>
<tr class="even">
<td>Agüero</td>
<td>1</td>
<td>Pérez</td>
<td>20</td>
</tr>
<tr class="odd">
<td>Sterling</td>
<td>11</td>
<td>Vardy</td>
<td>20</td>
</tr>
<tr class="even">
<td>Salah</td>
<td>7</td>
<td>Chilwell</td>
<td>19</td>
</tr>
<tr class="odd">
<td>Vardy</td>
<td>20</td>
<td>Krul</td>
<td>16</td>
</tr>
<tr class="even">
<td>De Bruyne</td>
<td>6</td>
<td>Willian</td>
<td>12</td>
</tr>
<tr class="odd">
<td>Aubameyang</td>
<td>2</td>
<td>Tielemans</td>
<td>11</td>
</tr>
<tr class="even">
<td>TAA</td>
<td>1</td>
<td>Sterling</td>
<td>11</td>
</tr>
<tr class="odd">
<td>Pukki</td>
<td>2</td>
<td>Milivojevic</td>
<td>10</td>
</tr>
<tr class="even">
<td>Mahrez</td>
<td>0</td>
<td>Lascelles</td>
<td>10</td>
</tr>
</tbody>
</table>
<p>This week was a lot better than last for seemingly ‘sensible’ captain picks. Very few people will have considered captaining most of the actual top ten. I think few would have considered anyone other than Sterling and Vardy from among these. Obviously, this is because the top ten is really skewed by the Chelsea and Leicester matches, with six players from those two teams, and by Tim Krul’s penalty saving exploits. That being said, the model’s top ten did pretty well. Five out of ten of them got returns, and two of them featured in the actual top ten (Vardy and Sterling). Bear in mind, of course, that Agüero didn’t start and Mahrez didn’t play at all. Mahrez was also only in there because this was the forced 90 minute version of the model. He was nowhere near the top ten in the average minutes version. If the model knew Agüero and Mahrez were going to get the amount of minutes they got (very few and zero, respectively), they would have been nowhere near the top ten.</p>
<p>Note that most good teams – actually, probably <em>all</em> good teams and pretty much all bad teams too – will have one or more of the model’s top 6, who all returned bar Agüero, who we know is a risky pick because of Pep’s rotation. We can’t ask for much more from our captains than to get some sort of return. The captain-picking logic, I’d say, served us pretty well this week.</p>
</div>
<div id="tammy-abraham" class="section level2 unnumbered">
<h2>Tammy Abraham</h2>
<p>Every week I get questions about why Tammy Abraham isn’t among the top picks. This was because the data I was using included several gameweeks from last season in which Tammy was listed as a Chelsea player, but got no points because he never actually played. Basically, the model wasn’t fully recognising that this was entirely down to him not playing. I’ve now <strong>removed Tammy Abraham’s 2018/19 data</strong> so he is treated like, for example, Mount, as being a ‘new’ Chelsea player this season. This, as you’ll see below, serves him very well. Note the uncertainty in his prediction though (the width of the probability distribution). Like Mount, Pukki, etc, the relatively few gameweeks on which his estimate is based means we have less confidence in it.</p>
</div>
<div id="average-minutes-and-90-minutes" class="section level2 unnumbered">
<h2>Average minutes and 90 minutes</h2>
<p>A reminder that I report two versions of the model output. In the first, every player is assumed to play the same amount of minutes this week as their average minutes over the last five gameweeks. In the other (the one I prefer), every player with an average number of minutes over the last five greater than 45 (a half) is assumed to play 90 minutes (a whole game) this week. I’m open to suggestions on a better way to incorporate minutes into the output, but to me this seems fairly decent. I just can’t really factor in Pep’s wheel and other random variance in minutes.</p>
</div>
<div id="results" class="section level2 unnumbered">
<h2>Results</h2>
<p>The results for this gameweek are below. When we assume average minutes, Mané and Vardy come out on top because they keep getting around 90 minutes each match. When we assume 90 minutes for all players averaging over 45 minutes, though, this clearly favours Man City against Aston Villa, putting Agüero and Sterling at the top, boosting De Bruyne from tenth to fifth, and bringing both David Silva and Mahrez into the top ten. Obviously, the risk in picking these players is Pep’s rotation. Sterling looks likely to be fairly safe from this this week, though.</p>
<p>Vardy is in great FPL form and this has put him firmly among the top picks. Abraham gets in there too thanks to having his last season’s data deleted. Note, though, that there is considerable uncertainty in his fitted score relative to say, Salah. In the second model, where they are neck and neck, we should actually be more confident in Salah getting about 5-6 points than Abraham doing so. Salah would also still just about be in the top five were it not for Vardy’s form and Abraham’s new inclusion – although Auba would pip him to fifth place in the average minutes version.</p>
<p>It looks like, on balance, Sterling and Mané are probably the sensible picks this week. They have the highest average position across the two outputs (third and second, and first and third, respectively). It seems very likely that they both start (Mané in particular). If you’re confident in Agüero starting for some reason, then you should probably go for him, and if you want a slightly differential/left-field pick (although I imagine he’ll be fairly popular) then Vardy looks the best bet.</p>
<p><img src="images/gameweek_11_top25_av.png" style="width:100%; border:0px solid; margin-right: 20px" align="left"></p>
<p><br /></p>
<p><img src="images/gameweek_11_top25_ext.png" style="width:100%; border:0px solid; margin-right: 20px" align="left"></p>
<p>Matthew Barnfield</p>
</div>
<div id="other-posts" class="section level2 unnumbered">
<h2>Other posts</h2>
<p><a href="2019-08-27-fpl-4.html">Gameweek 4 captaincy pick and introduction to model</a></p>
<p><a href="2019-09-12-fpl-5.html">Gameweek 5 captaincy pick, discussion of priors</a></p>
<p><a href="2019-09-20-fpl-6.html">Gameweek 6 captaincy pick, discussion major model changes</a></p>
<p><a href="2019-09-27-fpl-7.html">Gameweek 7 captaincy pick, discussion major model changes</a></p>
<p><a href="2019-10-17-fpl-9.html">Gameweek 9 captaincy pick, partial reintroduction to model</a></p>
<p><a href="2019-10-24-fpl-10.html">Gameweek 10 captaincy pick, assessment of GW9 performance</a></p>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_').toLowerCase();
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
